toctree: False


Changelog
=========

`1.5 <https://github.com/lona-web-org/lona/releases/tag/1.5>`_ (2021-09-01)
---------------------------------------------------------------------------

Breaking Changes
~~~~~~~~~~~~~~~~

* html

  * ``lona.html.HTML`` now parses HTML into high level nodes like
    ``lona.html.TextInput``

  * All subclasses of ``lona.html.AbstractNode`` can implement
    ``handle_input_event()`` now

    * Previously only ``lona.html.Widget`` classes could


Changes
~~~~~~~

* html

  * All databinding widgets (``lona.html.TextInput``, ``lona.html.TextArea``,
    ``lona.html.CheckBox`` and ``lona.html.Select``) were ported to nodes

    * Since ``lona.html.AbstractNode`` subclasses can handle their own input
      events there is no need to implement them as widgets anymore

  * ``lona.html.AbstractNode.handle_click()`` and
    ``lona.html.AbstractNode.handle_change()`` for more Javascript like
    callback handling were added

  * ``lona.html.HTML(use_high_level_nodes=True)`` was added to disable
    parsing into high level nodes

  * The Nodes ``lona.html.Html``, ``lona.html.Head`` and ``lona.html.Body``
    were removed

    * There is no way to use them with Lona without breaking HTML5 conventions

Bugfixes
~~~~~~~~

* html

  * Parsing of the ``style`` attribute when using ``lona.html.HTML`` was fixed

    * Previously parsing of HTML nodes that defined a ``style`` attribute
      crashed with a ``ValueError``

  * ``lona.html.TFood`` was renamed to ``lona.html.TFoot``
  * ``lona.html.Fieldset`` had the tag name ``form`` set previously
  * ``lona.html.TextArea`` preserves all whitespaces now when generated by
    using ``lona.html.HTML``


`1.4.1 <https://github.com/lona-web-org/lona/releases/tag/1.4.1>`_ (2021-08-27)
-------------------------------------------------------------------------------

Changes
~~~~~~~

* html

  * support for defining sub nodes as list was added
  * ``AbstractNode.closest()`` was added

* support for ``python -m lona`` was added


`1.4 <https://github.com/lona-web-org/lona/releases/tag/1.4>`_ (2021-08-26)
---------------------------------------------------------------------------

Changes
~~~~~~~

* logging

  * the Lona root logger can't be filtered anymore

    * The root logger is used by the command line tools to report errors, for
      example when startup is not possible due an invalid host or port.
      These errors should never be ignored.

  * the default log level was set from ``logging.WARN`` to ``logging.INFO``

* requests

  * ``request.user`` is now writeable

    * In middlewares it makes sense to set ``request.user`` from a
      handle_request hook for authentication or authorization.

  * ``request.interactive`` was added

    * ``request.interactive`` is a shortcut to
      ``request.connection.interactive``

* support for ``NO_COLOR`` environment variable was added

  * more information: `no-color.org <https://no-color.org>`_

Bugfixes
~~~~~~~~

* unique ids in ``lona.html.AbstractNode`` and view runtimes were fixed

  * Previously timestamps generated by ``time.monotonic_ms()`` were used as
    unique ids, but at least on Windows, these timestamps seem not to have an
    high enough resolution.
    This results in HTML trees in which all nodes have the same node id, which
    breaks input events.

* logging

  * ansi colors are now disabled in terminals that don't support them

  * color palette were fixed for light terminals


`1.3 <https://github.com/lona-web-org/lona/releases/tag/1.3>`_ (2021-08-22)
---------------------------------------------------------------------------

Breaking Changes
~~~~~~~~~~~~~~~~

* html: inputs: ``TextInput``, ``TextArea``, ``CheckBox``, ``Select``:
  ``input_event.node`` now contain the outer widget, not the inner node to
  make checks in views simpler

* sessions: the session middleware now skips cookie setting and redirecting on
  non interactive views to make REST APIs work as expected

Changes
~~~~~~~

* routing: the router now uses ``functools.lru_cache`` for ``resolve()`` and
  ``reverse()``
* html: parsing: obsolete empty ``TextNode`` objects that are not part of a
  ``pre`` get filtered out now
* views: non-interactive views can return Lona HTML trees now

Bugfixes
~~~~~~~~

* views: ``GET`` variables were fixed for non-interactive views
* views: handling of empty return values for non-interactive views like
  ``''`` or ``None`` was fixed


`1.2 <https://github.com/lona-web-org/lona/releases/tag/1.2>`_ (2021-08-19)
---------------------------------------------------------------------------

Breaking Changes
~~~~~~~~~~~~~~~~

* contrib: contrib.django was moved to `github.com/lona-web-org/lona-django <https://github.com/lona-web-org/lona-django>`_
* contrib: contrib.chartjs was moved to `github.com/lona-web-org/lona-chartjs <https://github.com/lona-web-org/lona-chartjs>`_
* contrib: contrib.bootstrap3 was removed

Changes
~~~~~~~

* frontend: the default frontend was split up in multiple templates, JS and CSS
  files to make it more configurable
* shell: the commands ``%lona_static_files``, ``%lona_templates`` and
  ``%lona_middlewares`` were added

Bugfixes
~~~~~~~~

* scripts: static file loading issues were fixed

  * previously ``app.add_static_file()`` and ``app.add_template()`` couldn't
    override default static files and templates

* shell: ``%lona_views``: python stack analysis when running from a Lona script
  was fixed

* shell: ``%lona_views``: fix error message when using ``--memory``

  * previously ``%lona_views`` would always return "invalid runtime id" when
    ``--memory`` is set.


`1.1.1 <https://github.com/lona-web-org/lona/releases/tag/1.1.1>`_ (2021-08-15)
-------------------------------------------------------------------------------

Bugfixes
~~~~~~~~

* html: nodes: Button: fix ``disabled`` property


`1.1 <https://github.com/lona-web-org/lona/releases/tag/1.1>`_ (2021-08-13)
---------------------------------------------------------------------------

Changes
~~~~~~~

* templating: add support for symlinks
* add Lona scripts
* add import shortcuts for ``LonaView``, ``Route``,
  ``ForbiddenError``, ``ClientError``, ``UserAbort`` and ``ServerStop``


`1.0.2 <https://github.com/lona-web-org/lona/releases/tag/1.0.2>`_ (2021-08-12)
-------------------------------------------------------------------------------

Bugfixes
~~~~~~~~

* command line: collect-static: fix wrong usage of shutil.copy

  * Previously collect-static crashed with a IsADirectoryError when trying to
    copy a directory


`1.0.1 <https://github.com/lona-web-org/lona/releases/tag/1.0.1>`_ (2021-08-10)
-------------------------------------------------------------------------------

Bugfixes
~~~~~~~~

* html: data binding: skip all non change events

  * Previously ``TextInput`` and ``Select`` catched all input events and
    handled them as ``CHANGE`` event. Now unknown events get bubbled up.

`1.0 <https://github.com/lona-web-org/lona/releases/tag/1.0>`_ (2021-08-09)
---------------------------------------------------------------------------

Initial stable release